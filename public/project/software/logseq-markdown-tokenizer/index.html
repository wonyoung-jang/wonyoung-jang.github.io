<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel=stylesheet><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes"><meta name=robots content="index, follow"><title>Wonyoung Jang
</title><meta name=keywords content><meta name=description content="
        Estimate the cost of tokenizing markdown files for [OpenAI's text-embedding models](https://platform.openai.com/docs/guides/embeddings/)."><meta name=author content="Wonyoung Jang"><link rel=canonical href=http://localhost:1313/project/software/logseq-markdown-tokenizer/><link crossorigin=anonymous href=/assets/css/all.min.05e2f9f12d563a99854e87d8a9d0decc1cb9324011ec10be7e318db510f6c030.css integrity="sha256-BeL58S1WOpmFTofYqdDezBy5MkAR7BC+fjGNtRD2wDA=" rel="preload stylesheet" as=style><link rel=preload href=/apple-touch-icon.png as=image><link crossorigin=anonymous rel=preload as=fetch href=/index.json><script defer crossorigin=anonymous src=/assets/js/search.min.f693d464c76f3b6a245ac3a3135c6971386905d9f2aa55ab7773d1f02e2a92a5.js integrity="sha256-9pPUZMdvO2okWsOjE1xpcThpBdnyqlWrd3PR8C4qkqU="></script><script defer crossorigin=anonymous src=/assets/js/highlight.min.2eadbb982468c11a433a3e291f01326f2ba43f065e256bf792dbd79640a92316.js integrity="sha256-Lq27mCRowRpDOj4pHwEybyukPwZeJWv3ktvXlkCpIxY=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.124.1"><link rel=alternate hreflang=en href=http://localhost:1313/project/software/logseq-markdown-tokenizer/><noscript><style></style><style></style></noscript><meta property="og:title" content="Logseq Markdown Tokenizer"><meta property="og:description" content="Estimate the cost of tokenizing markdown files for [OpenAI's text-embedding models](https://platform.openai.com/docs/guides/embeddings/)."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/project/software/logseq-markdown-tokenizer/"><meta property="article:section" content="project"><meta property="article:published_time" content="2024-01-13T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-18T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Logseq Markdown Tokenizer"><meta name=twitter:description content="Estimate the cost of tokenizing markdown files for [OpenAI's text-embedding models](https://platform.openai.com/docs/guides/embeddings/)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"http://localhost:1313/project/"},{"@type":"ListItem","position":2,"name":"Software","item":"http://localhost:1313/project/software/"},{"@type":"ListItem","position":3,"name":"Logseq Markdown Tokenizer","item":"http://localhost:1313/project/software/logseq-markdown-tokenizer/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Logseq Markdown Tokenizer","name":"Logseq Markdown Tokenizer","description":"Estimate the cost of tokenizing markdown files for [OpenAI's text-embedding models](https://platform.openai.com/docs/guides/embeddings/).","keywords":[],"articleBody":"The Problem Logseq does not have a native way to view the character count of your notes (aka pages).\nLogseq’s performance is a balance between the number of pages and the size of each page.\nLogseq’s graph is difficult to search and prune manually.\nProposed Solution Encode Logseq’s graph to enable semantic search, then leverage this encoding to develop an automatic pruning tool of some kind.\nImplementation If I want to enable semantic search, then I must embed my graph.\nIf I don’t know the size of my graph or its pages, then there exists a chance that embedding my graph could be very costly.\nIf I want to tokenize all the pages in my graph, then I need to iterate through the text of each page.\nIf I have to do that anyways, then I may as well count the characters along the way.\nIf I do both, then I also increment a total counter to get a total count of characters and tokens for my graph.\nIf have the token counts, I can estimate the cost of embedding for OpenAI’s three available text-embedding models.\nOutputting the Data to CSV If I output this data as a CSV, I can manipulate and format the data. For instance, with conditional formatting:\nSummary This is my answer to efficiently managing large texts within the note-taking tool Logseq, particularly when dealing with extensive book highlights and other sizable content sources, like automatic imports of highlights of large articles from Read-Later apps like Omnivore.\n","wordCount":"251","inLanguage":"en","datePublished":"2024-01-13T00:00:00Z","dateModified":"2024-05-18T00:00:00Z","author":{"@type":"Person","name":"Wonyoung Jang"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/project/software/logseq-markdown-tokenizer/"},"publisher":{"@type":"Organization","name":"Wonyoung Jang","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script><script>document.addEventListener("DOMContentLoaded",function(){for(var e,s,n=document.getElementsByTagName("a"),o=window.location.hostname,t=0;t<n.length;t++)e=n[t],s=new URL(e.href).hostname,s===o?e.classList.add("internal-link"):e.classList.add("external-link")})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-RTMKJG4NFZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),-gtag("config","G-RTMKJG4NFZ")</script><link rel="shortcut icon" href type=image/x-icon><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp" rel=stylesheet></head><body id=top><header role=banner><nav class="component top-app-bar center small" aria-label="Top App Bar"><section class=start><button class="component button common with-icon">
<a href=http://localhost:1313/ accesskey=h title="Wonyoung Jang (ALT + SHIFT + h)"></a><img src=http://localhost:1313/apple-touch-icon.png alt=logo aria-label=logo><h6 class=site-headline>Wonyoung Jang</h6></button></section><section class=end><button class="component button icon" id=theme-toggle accesskey=t title="Toggle Theme (ALT + SHIFT + t)">
<i id=moon>dark_mode</i>
<i id=sun>light_mode</i>
</button>
<button class="component button icon" onclick="return navigateToRandomPage(),!1">
<i>ifl</i>
</button>
<script>function navigateToRandomPage(){window.location.href="/project/university/bagel-corner-and-mister-coffee-database-management/"}</script><button class="component button icon filled-tonal">
<a href=/search></a><i>search</i></button></section></nav><div class="component tabs title-medium"><div class="component tabs"><li class="component tab"><a href=/></a>Home</li><li class="component tab active"><a href=/project/></a>Projects<section class=sub-menu><li class="component tab"><a href=/project/software/></a>Software</li><li class="component tab"><a href=/project/university/></a>University</li></section></li><li class="component tab"><a href=/resource/></a>Resources<section class=sub-menu><li class="component tab"><a href=/resource/reference/></a>Reference</li></section></li><li class="component tab"><a href=/search/></a>Search</li><li class="component tab"><a href=/about/></a>About</li><li class="component tab"><a href=/contact/></a>Contact</li><li class="component tab"><a href></a>Graph</li></div></div><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script></header><main role=main><div class="layout content-wrapper"><section class="layout page-header"><nav class="breadcrumbs label-large" aria-label=Breadcrumbs><ol><li><a href=http://localhost:1313/>Home</a></li><li><a href=http://localhost:1313/project/>Projects</a></li><li><a href=http://localhost:1313/project/software/>Software</a></li></ol></nav><h1 class=title>Logseq Markdown Tokenizer</h1><span class="description title-small">Estimate the cost of tokenizing markdown files for <a href=https://platform.openai.com/docs/guides/embeddings/>OpenAI&rsquo;s text-embedding models</a>.</span><div class=label-large><em class=metadata title='2024-01-13 00:00:00 +0000 UTC'><span>2024, Jan 13 - 2 min read</span></em></div><button class="component button common elevated">
<a href=https://github.com/wonyoung-jang/logseq-tokenizer target=_blank rel="noopener noreferrer" aria-label="View the source code on GitHub https://github.com/wonyoung-jang/logseq-tokenizer "></a>View the source @logseq-tokenizer on GitHub
</button>
<img class=cover-image src=http://localhost:1313/assets/logseq_tokenizer_1709673334004_0.png alt="Logseq Markdown Tokenizer - descriptive image of the post content"></section><article class="layout panes basic-fixedflex" id=single><section class="layout pane" id=post-content><h2 id=the-problem>The Problem<a hidden class=anchor aria-hidden=true href=#the-problem>#</a></h2><ul><li><p><a href=https://logseq.com/>Logseq</a> does not have a native way to view the character count of your notes (aka pages).</p></li><li><p>Logseq&rsquo;s performance is a balance between the number of pages and the size of each page.</p></li><li><p>Logseq&rsquo;s graph is difficult to search and prune manually.</p></li></ul><h2 id=proposed-solution>Proposed Solution<a hidden class=anchor aria-hidden=true href=#proposed-solution>#</a></h2><p>Encode Logseq&rsquo;s graph to enable semantic search, then leverage this encoding to develop an automatic pruning tool of some kind.</p><h2 id=implementation>Implementation<a hidden class=anchor aria-hidden=true href=#implementation>#</a></h2><ul><li><p>If I want to enable semantic search, then I must embed my graph.</p></li><li><p>If I don&rsquo;t know the size of my graph or its pages, then there exists a chance that embedding my graph could be very costly.</p></li><li><p>If I want to tokenize all the pages in my graph, then I need to iterate through the text of each page.</p></li><li><p>If I have to do that anyways, then I may as well count the characters along the way.</p></li><li><p>If I do both, then I also increment a total counter to get a total count of characters and tokens for my graph.</p></li><li><p>If have the token counts, I can estimate the cost of embedding for OpenAI&rsquo;s three available <code>text-embedding</code> models.</p></li></ul><h2 id=outputting-the-data-to-csv>Outputting the Data to CSV<a hidden class=anchor aria-hidden=true href=#outputting-the-data-to-csv>#</a></h2><p>If I output this data as a CSV, I can manipulate and format the data. For instance, with conditional formatting:</p><p><img loading=lazy src=/assets/example_output_1710007420546_0.png alt=example_output.png></p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>This is my answer to efficiently managing large texts within the note-taking tool <a href=https://logseq.com/>Logseq</a>, particularly when dealing with extensive book highlights and other sizable content sources, like automatic imports of highlights of large articles from Read-Later apps like <a href=https://omnivore.app/>Omnivore</a>.</p></section><aside class="layout pane fixed-pane" id=toc><nav class=toc aria-label="Page Content"><h2 class=overline>On this page</h2><div class=title>Logseq Markdown Tokenizer</div><div id=activeIndicator class=indicator></div><nav id=TableOfContents><ul><li><ul><li><a href=#the-problem>The Problem</a></li><li><a href=#proposed-solution>Proposed Solution</a></li><li><a href=#implementation>Implementation</a></li><li><a href=#outputting-the-data-to-csv>Outputting the Data to CSV</a></li><li><a href=#summary>Summary</a></li></ul></li></ul></nav></nav></aside></article><section class="layout page-links"><nav id=share-links aria-label="Share Links"><h5>Share<div class=divider></div></h5><ul><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer on twitter" href="https://twitter.com/intent/tweet/?text=Logseq%20Markdown%20Tokenizer&amp;url=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f&amp;hashtags=">Twitter/X</a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f&amp;title=Logseq%20Markdown%20Tokenizer&amp;summary=Logseq%20Markdown%20Tokenizer&amp;source=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f">LinkedIn</a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f&title=Logseq%20Markdown%20Tokenizer">Reddit</a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f">Facebook</a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer on whatsapp" href="https://api.whatsapp.com/send?text=Logseq%20Markdown%20Tokenizer%20-%20http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f">WhatsApp</a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer on telegram" href="https://telegram.me/share/url?text=Logseq%20Markdown%20Tokenizer&amp;url=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f">Telegram</a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logseq Markdown Tokenizer via email" href="mailto:?subject=Logseq%20Markdown%20Tokenizer&amp;body=http%3a%2f%2flocalhost%3a1313%2fproject%2fsoftware%2flogseq-markdown-tokenizer%2f">Email</a></li><li><a href=javascript:window.print() aria-label="print Logseq Markdown Tokenizer">Print</a></li></ul></nav></section><nav class="layout page-navigation" aria-label="Page Navigation"><div class="component card filled prev"><a href=http://localhost:1313/project/university/cs-career-recommendation-chatbot/></a><span class=page-direction><i>arrow_back</i>
<label>Previous</label></span><h6>CS Career Recommendation Chatbot</h6></div><div class="component card filled next"><a href=http://localhost:1313/project/university/package-delivery-route-optimization/></a><span class=page-direction><label>Up next
</label><i>arrow_forward</i></span><h6>Package Delivery Route Optimization</h6></div></nav></div><a class="component button fab primary-container" id=top-link href=#top aria-label="go to top" title="Go to Top (ALT + SHIFT + g)" accesskey=g><i>vertical_align_top</i>
</a><script>var mybutton=document.getElementById("top-link"),scrollWrapper=document.querySelector("main");function handleScroll(){scrollWrapper.scrollTop>100?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):window.pageYOffset>100?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}window.addEventListener("scroll",handleScroll),scrollWrapper.addEventListener("scroll",handleScroll),mybutton.addEventListener("click",function(){scrollWrapper.scrollTo({top:0,behavior:"smooth"})})</script><footer role=contentinfo><section class=footer-links><ul><h6>Quick links</h6><li class=active><a href=/about/>About</a></li><li><a href=/contact/>Contact</a></li><li><a href=/sitemap/>Sitemap</a></li></ul><ul><h6>Connect</h6><a href=https://github.com/wonyoung-jang target=_blank rel="noopener noreferrer me">Github
</a><a href=https://ko-fi.com/wonyoung_jang target=_blank rel="noopener noreferrer me">Kofi
</a><a href=https://wonyoungjang.org/index.xml target=_blank rel="noopener noreferrer me">Rss
</a><a href=mailto:contact@wonyoungjang.org target=_blank rel="noopener noreferrer me">Email</a></ul></section><section class=copyright><button class="component button with-icon">
<a href=http://localhost:1313/></a>© 2024 Wonyoung Jang</button></section><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.prepend(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.prepend(t):e.parentNode.prepend(t))})</script></footer></main></body></html>