<button
  class="component button icon"
  id="random-button"
  accesskey="r"
  title="Random page (ALT + SHIFT + R)"
  onclick="navigateToRandomPage(); return false;">
  <i class="icon">ifl</i>
</button>

{{/*  Removes graphs  */}}
{{ $pages := where site.AllPages "RelPermalink" "ne" "/graph/" }}
{{ $pages = where $pages "RelPermalink" "ne" "/" }}
{{/*  Removes self  */}}
{{ $currRelPermalink := .RelPermalink }}
{{ $pages = where $pages "RelPermalink" "ne" $currRelPermalink }}

<script defer>
  let pages = [
    {{ range $pages }}
      "{{ .RelPermalink }}",
    {{ end }}
  ];
  
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }
  
  function navigateToRandomPage() {
    shuffleArray(pages);
    window.location.href = pages[0];
  }
  
  document.addEventListener("DOMContentLoaded", function () {
    const randomButton = document.getElementById("random-button");
    randomButton.addEventListener("click", navigateToRandomPage);
  });  
</script>