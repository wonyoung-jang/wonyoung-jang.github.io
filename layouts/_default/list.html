{{- define "main" -}}

    {{- $pages := union .RegularPages .Sections -}}

    <article class="layout panes canonical-feed">
        <section class="layout pane">

            {{- range $index, $page := $pages -}}        
                <a  class="component card outlined"
                    aria-label="post link to {{- .Title | plainify -}}" 
                    href="{{- .Permalink -}}">

                    {{- $isHidden := (.Site.Params.cover.hidden | default .Site.Params.cover.hiddenInList) -}}
                    {{- partial "components/cover.html" (dict "cxt" . "IsHome" true "isHidden" $isHidden) -}}            
                
                    {{- if .Params.coverimage -}}
                        <img    loading="lazy" 
                                src="{{- .Params.coverimage | absURL -}}" 
                                alt="{{- $.Title -}} - descriptive image of the post content">
                    {{- end -}}
                    
                    <div class="card-content">
                        {{- if not (.Param "hideMeta") -}}
                            {{- partial "components/post-meta.html" . -}}
                        {{- end -}}
                        
                        <span class="title-small">
                            {{- .Title -}}
                        </span>
                    </div>
                </a>
            {{- end -}}

        </section>
    </article>

{{- end -}}