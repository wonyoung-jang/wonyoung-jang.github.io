<button class="component button icon-button" id="typography-selector">
    <i>custom_typography</i>
    <menu class="menu">
        <fieldset class="typography-fieldset">
            <legend class="title-medium">Font Size</legend>
            <div class="slider">
                <input type="range" id="font-size-slider" name="font-size" min="8" max="24" value="14" step="1">
                <output for="font-size-slider" id="font-size-output">14px</output>
            </div>
        </fieldset>

        <div class="divider"></div>
       
        <fieldset class="typography-fieldset">
            <legend class="title-medium">Line Height</legend>
            <div class="slider">
                <input type="range" id="line-height-slider" name="line-height" min="1.0" max="1.6" value="1.5" step="0.050">
                <output for="line-height-slider" id="line-height-output">1.5</output>
            </div>
        </fieldset>

        <div class="divider"></div>

        <fieldset class="typography-fieldset">
            <legend class="title-medium">Brand Font</legend>
            <div class="component radio-button">
                <input type="radio" id="brand-raleway" name="brand-font" value="Raleway" checked>
                <label for="brand-raleway">Raleway</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="brand-arial" name="brand-font" value="Arial">
                <label for="brand-arial">Arial</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="brand-times" name="brand-font" value="Times New Roman">
                <label for="brand-times">Times New Roman</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="brand-courier" name="brand-font" value="Courier New">
                <label for="brand-courier">Courier New</label>
            </div>
        </fieldset>

        <div class="divider"></div>
       
        <fieldset class="typography-fieldset">
            <legend class="title-medium">Plain Font</legend>
            <div class="component radio-button">
                <input type="radio" id="plain-ibm" name="plain-font" value="IBM Plex Sans" checked>
                <label for="plain-ibm">IBM Plex Sans</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="plain-arial" name="plain-font" value="Arial">
                <label for="plain-arial">Arial</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="plain-times" name="plain-font" value="Times New Roman">
                <label for="plain-times">Times New Roman</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="plain-courier" name="plain-font" value="Courier New">
                <label for="plain-courier">Courier New</label>
            </div>
        </fieldset>

        <div class="divider"></div>
       
        <fieldset class="typography-fieldset">
            <legend class="title-medium">Code Font</legend>
            <div class="component radio-button">
                <input type="radio" id="code-ibm" name="code-font" value="IBM Plex Mono" checked>
                <label for="code-ibm">IBM Plex Mono</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="code-arial" name="code-font" value="Arial">
                <label for="code-arial">Arial</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="code-times" name="code-font" value="Times New Roman">
                <label for="code-times">Times New Roman</label>
            </div>
            <div class="component radio-button">
                <input type="radio" id="code-courier" name="code-font" value="Courier New">
                <label for="code-courier">Courier New</label>
            </div>
        </fieldset>
    </menu>
</button>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var root = document.documentElement;
        var typographySelector = document.getElementById('typography-selector');
        var fontSizeSlider = document.getElementById('font-size-slider');
        var fontSizeOutput = document.getElementById('font-size-output');
        var lineHeightSlider = document.getElementById('line-height-slider');
        var lineHeightOutput = document.getElementById('line-height-output');

        function updateTypography() {
            var brandFont = document.querySelector('input[name="brand-font"]:checked').value;
            var plainFont = document.querySelector('input[name="plain-font"]:checked').value;
            var codeFont = document.querySelector('input[name="code-font"]:checked').value;
            var fontSize = fontSizeSlider.value;
            var lineHeight = lineHeightSlider.value;

            root.style.setProperty('--typeface-brand', brandFont);
            root.style.setProperty('--typeface-plain', plainFont);
            root.style.setProperty('--typeface-code', codeFont);
            root.style.setProperty('--input-font-size', fontSize + 'px');
            root.style.setProperty('--input-line-height', lineHeight);

            fontSizeOutput.textContent = fontSize + 'px';
            lineHeightOutput.textContent = lineHeight;

            // Store values in localStorage
            localStorage.setItem('typography-brand-font', brandFont);
            localStorage.setItem('typography-plain-font', plainFont);
            localStorage.setItem('typography-code-font', codeFont);
            localStorage.setItem('typography-font-size', fontSize);
            localStorage.setItem('typography-line-height', lineHeight);
        }

        // Load saved values from localStorage
        var savedBrandFont = localStorage.getItem('typography-brand-font');
        var savedPlainFont = localStorage.getItem('typography-plain-font');
        var savedCodeFont = localStorage.getItem('typography-code-font');
        var savedFontSize = localStorage.getItem('typography-font-size');
        var savedLineDensity = localStorage.getItem('typography-line-height');

        if (savedBrandFont) document.querySelector(`input[name="brand-font"][value="${savedBrandFont}"]`).checked = true;
        if (savedPlainFont) document.querySelector(`input[name="plain-font"][value="${savedPlainFont}"]`).checked = true;
        if (savedCodeFont) document.querySelector(`input[name="code-font"][value="${savedCodeFont}"]`).checked = true;
        if (savedFontSize) fontSizeSlider.value = savedFontSize;
        if (savedLineDensity) lineHeightSlider.value = savedLineDensity;

        // Apply saved or default values
        updateTypography();

        // Add event listeners
        typographySelector.addEventListener('change', updateTypography);
        fontSizeSlider.addEventListener('input', updateTypography);
        lineHeightSlider.addEventListener('input', updateTypography);
    });
</script>