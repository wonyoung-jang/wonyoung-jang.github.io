<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
{{- if hugo.IsProduction | or (eq site.Params.env "production") | and (ne .Params.robotsNoIndex true) }}
    <meta name="robots" content="index, follow">
{{- else }}
    <meta name="robots" content="noindex, nofollow">
{{- end }}

{{/* Meta */}}
<meta name="description" content="{{- with .Description -}}{{- . -}}{{- else -}}{{- if or .IsPage .IsSection -}}{{- .Summary | default (printf "%s - %s" .Title  site.Title) -}}{{- else -}}{{- with site.Params.description -}}{{- . -}}{{- end -}}{{- end -}}{{- end }}">
<meta name="author" content="Wonyoung Jang">
{{- if site.Config.Services.GoogleAnalytics.ID }}
    <meta name="google-site-verification" content="{{ site.Config.Services.GoogleAnalytics.ID }}">
{{- end }}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

{{/* Title */}}
<title>
    {{ if .IsHome }}
        {{ site.Title }}
    {{ else }}
        {{ .Title }} | {{ site.Title }}
    {{ end }}
</title>

{{- partialCached "fonts.html" . -}}

{{/* Styles */}}
{{- $tokens     := (resources.Match "css/0-tokens/**.css")         | resources.Concat "assets/css/0-tokens.css" -}}
{{- $base       := (resources.Match "css/1-base/**.css")           | resources.Concat "assets/css/1-base.css" -}}
{{- $layouts    := (resources.Match "css/2-layouts/**.css")        | resources.Concat "assets/css/2-layouts.css" -}}
{{- $components := (resources.Match "css/3-components/**.css")     | resources.Concat "assets/css/3-components.css" -}}
{{- $custom     := (resources.Match "css/4-custom/**.css")         | resources.Concat "assets/css/4-custom.css" -}}
{{- $helpers    := (resources.Match "css/5-helpers/**.css")        | resources.Concat "assets/css/5-helpers.css" -}}
{{- $stylesheet := (slice $tokens $base $layouts $components $custom $helpers) | resources.Concat "assets/css/stylesheet.css" | resources.Minify -}}
{{- $stylesheet := $stylesheet | fingerprint -}}
<link crossorigin="anonymous" href="{{ $stylesheet.RelPermalink }}" integrity="{{ $stylesheet.Data.Integrity }}" rel="preload stylesheet" as="style">

{{/* Search */}}
{{ if (eq .Layout `search`) }}
    <link rel="preload" as="fetch" href="../index.json" crossorigin="anonymous">
    {{ $fastsearch := resources.Get "js/fastsearch.js" | js.Build (dict "params" (dict "fuseOpts" site.Params.fuseOpts)) }}
    {{ $fusejs := resources.Get "js/fuse.js" }}
    {{ $search := (slice $fusejs $fastsearch ) | resources.Concat "assets/js/search.js" | resources.Minify | fingerprint }}
    <script defer crossorigin="anonymous" src="{{ $search.RelPermalink }}" integrity="{{ $search.Data.Integrity }}"></script>
{{ end }}

{{/* Favicons */}}
<link rel="icon" href="{{ site.Params.assets.favicon | default "sitelogo.svg" | absURL }}">

{{/* RSS */}}
{{ range .AlternativeOutputFormats }}
    <link rel="{{ .Rel }}" type="{{ .MediaType.Type | html }}" href="{{ .Permalink | safeURL }}">
{{ end }}

{{ range .AllTranslations }}
    <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
{{ end }}

{{/* Generator */}}
{{ hugo.Generator }}

<noscript>
    <style>
        #theme-toggle,
        #top-link {
            display: none;
        }
    </style>
</noscript>

{{/* Misc */}}
{{ template "_internal/opengraph.html" . }}
{{ template "_internal/schema.html" . }}
{{ template "_internal/twitter_cards.html" . }}
