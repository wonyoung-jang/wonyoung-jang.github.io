.switch {
  --container-display: flex;
  --container-flex-flow: row nowrap;
  --container-justify-content: initial;
  --container-align-items: initial;
  --container-gap: initial;
  --container-height: var(--size-8);
  --container-width: var(--size-13);
  --container-padding: initial;

  --container-outline: 2px solid var(--color-outline);
  --container-elevation: initial;
  --container-shape: var(--shape-corner-full);
  
  --bg-color: var(--surface-container-highest);
  
  --text-color: initial;
  --icon-color: initial;

  --container-outline-hover: 2px solid var(--color-outline);
  --container-elevation-hover: initial;

  --container-outline-focus: 2px solid var(--color-outline);
  --container-elevation-focus: initial;

  --container-outline-press: 2px solid var(--color-outline);
  --container-elevation-press: initial;

  &:has(.track:checked) {
    --container-outline: 2px solid var(--color-primary);
  }

  & .handle {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    transition: all var(--motion-duration-medium4) var(--motion-easing-emphasized);
    border-radius: var(--shape-corner-full);

    &::before {
      position: absolute;
      content: "";
    }

    & .icon-container {
      position: relative;
      display: flex;
      flex-flow: column nowrap;
      align-items: center;
      justify-content: center;
    }

    & i {
      position: absolute;
      top: 2px;
      left: 2px;
      font-size: var(--size-4);
      border-radius: var(--shape-corner-full);
    }
  }

  & .track {
    opacity: 0;
    width: 0;
    height: 0;

    &:not(:checked) + .handle {
    
      &::before {
        position: absolute;
        width: 16px;
        height: 16px;
        top: 6px;
        left: 6px;
        transition: all var(--motion-duration-medium4) var(--motion-easing-emphasized);
        border-radius: var(--shape-corner-full);
        background-color: var(--color-outline);
      }

      &:has(.icon-container) {
        &::before {
          display: none;
        }
      }

      & i {
        color: var(--color-surface-container-highest);
        background-color: var(--color-outline);
        transition: all var(--motion-duration-medium4) var(--motion-easing-emphasized);

        &.close-icon {
          opacity: 1;
        }

        &.check-icon {
          opacity: 0;
        }
      }
    }

    &:checked + .handle {
      background-color: var(--color-primary);

      &::before {
        position: absolute;
        width: 24px;
        height: 24px;
        top: 2px;
        left: 2px;
        transition: all var(--motion-duration-medium4) var(--motion-easing-emphasized);
        border-radius: var(--shape-corner-full);
        background-color: var(--color-on-primary);
        transform: translateX(20px);
      }

      &:has(.icon-container) {
        &::before {
          display: none;
        }
      }

      & i {
        color: var(--color-on-primary-container);
        background-color: var(--color-primary-container);
        transition: all var(--motion-duration-medium4) var(--motion-easing-emphasized);
        transform: translateX(20px);
        
        &.close-icon {
          opacity: 0;
        }
        
        &.check-icon {
          opacity: 1;
        }      
      }
    }
  }
}
